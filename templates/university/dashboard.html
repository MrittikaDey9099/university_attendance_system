<!DOCTYPE html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8"> 
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>Dashboard - University Attendance System</title> 
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"> 
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"> 
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> 
</head> 
<body> 
    <div class="container-fluid"> 
        <div class="row"> 
            <nav class="col-md-3 col-lg-2 d-md-block bg-primary text-white min-vh-100"> 
                <div class="position-sticky pt-3"> 
                    <div class="text-center mb-4"> 
                        <i class="fas fa-university fa-3x text-white mb-2"></i> 
                        <h5>University Attendance</h5> 
                    </div> 
                    <ul class="nav flex-column"> 
                        <li class="nav-item"> 
                            <a class="nav-link active text-white" href="/dashboard/"> 
                                <i class="fas fa-tachometer-alt me-2"></i>Dashboard 
                            </a> 
                        </li> 
                        <li class="nav-item"> 
                            <a class="nav-link text-white" href="/attendance/bulk/"> 
                                <i class="fas fa-clipboard-check me-2"></i>Mark Attendance 
                            </a> 
                        </li> 
                        <li class="nav-item"> 
                            <a class="nav-link text-white" href="/students/"> 
                                <i class="fas fa-users me-2"></i>Students 
                            </a> 
                        </li> 
                        <li class="nav-item"> 
                            <a class="nav-link text-white" href="/courses/"> 
                                <i class="fas fa-book me-2"></i>Courses 
                            </a> 
                        </li> 
                        <li class="nav-item"> 
                            <a class="nav-link text-white" href="/admin/"> 
                                <i class="fas fa-cogs me-2"></i>Admin 
                            </a> 
                        </li> 
                        <li class="nav-item mt-4"> 
                            <a class="nav-link text-warning" href="/accounts/logout/"> 
                                <i class="fas fa-sign-out-alt me-2"></i>Logout 
                            </a> 
                        </li> 
                    </ul> 
                </div> 
            </nav> 
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4"> 
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom"> 
                    <h1 class="h2">Dashboard</h1> 
                    <div class="btn-toolbar mb-2 mb-md-0"> 
                        <button type="button" class="btn btn-sm btn-outline-secondary" onclick="loadDashboardStats()"> 
                            <i class="fas fa-sync-alt me-1"></i>Refresh 
                        </button> 
                    </div> 
                <div class="row"> 
                    <div class="col-xl-3 col-md-6 mb-4"> 
                        <div class="card border-left-primary shadow h-100 py-2"> 
                            <div class="card-body"> 
                                <div class="row no-gutters align-items-center"> 
                                    <div class="col mr-2"> 
                                        <div class="text-xs font-weight-bold text-primary text-uppercase mb-1">Total Students</div> 
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="total-students">0</div> 
                                    </div> 
                                    <div class="col-auto"> 
                                        <i class="fas fa-users fa-2x text-gray-300"></i> 
                                    </div> 
                                </div> 
                            </div> 
                        </div> 
                    </div> 
                    <div class="col-xl-3 col-md-6 mb-4"> 
                        <div class="card border-left-success shadow h-100 py-2"> 
                            <div class="card-body"> 
                                <div class="row no-gutters align-items-center"> 
                                    <div class="col mr-2"> 
                                        <div class="text-xs font-weight-bold text-success text-uppercase mb-1">Present Today</div> 
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="present-today">0</div> 
                                    </div> 
                                    <div class="col-auto"> 
                                        <i class="fas fa-clipboard-check fa-2x text-gray-300"></i> 
                                    </div> 
                                </div> 
                            </div> 
                        </div> 
                    </div> 
                    <div class="col-xl-3 col-md-6 mb-4"> 
                        <div class="card border-left-info shadow h-100 py-2"> 
                            <div class="card-body"> 
                                <div class="row no-gutters align-items-center"> 
                                    <div class="col mr-2"> 
                                        <div class="text-xs font-weight-bold text-info text-uppercase mb-1">Attendance Rate</div> 
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="attendance-rate">0%</div> 
                                    </div> 
                                    <div class="col-auto"> 
                                        <i class="fas fa-percentage fa-2x text-gray-300"></i> 
                                    </div> 
                                </div> 
                            </div> 
                        </div> 
                    </div> 
                    <div class="col-xl-3 col-md-6 mb-4"> 
                        <div class="card border-left-warning shadow h-100 py-2"> 
                            <div class="card-body"> 
                                <div class="row no-gutters align-items-center"> 
                                    <div class="col mr-2"> 
                                        <div class="text-xs font-weight-bold text-warning text-uppercase mb-1">Total Courses</div> 
                                        <div class="h5 mb-0 font-weight-bold text-gray-800" id="total-courses">0</div> 
                                    </div> 
                                    <div class="col-auto"> 
                                        <i class="fas fa-book fa-2x text-gray-300"></i> 
                                    </div> 
                                </div> 
                            </div> 
                        </div> 
                    </div> 
                <div class="row mt-4"> 
                    <div class="col-lg-8"> 
                        <div class="card shadow mb-4"> 
                            <div class="card-header py-3"> 
                                <h6 class="m-0 font-weight-bold text-primary">Attendance Overview</h6> 
                            </div> 
                            <div class="card-body"> 
                                <canvas id="attendanceChart" width="100%" height="40"></canvas> 
                            </div> 
                        </div> 
                    </div> 
                    <div class="col-lg-4"> 
                        <div class="card shadow mb-4"> 
                            <div class="card-header py-3"> 
                                <h6 class="m-0 font-weight-bold text-primary">Course Distribution</h6> 
                            </div> 
                            <div class="card-body"> 
                                <canvas id="courseChart" width="100%" height="200"></canvas> 
                            </div> 
                        </div> 
                    </div> 
                <div class="row mt-4"> 
                    <div class="col-12"> 
                        <div class="card shadow"> 
                            <div class="card-header py-3"> 
                                <h6 class="m-0 font-weight-bold text-primary">Quick Actions</h6> 
                            </div> 
                            <div class="card-body"> 
                                <div class="row g-3"> 
                                    <div class="col-sm-3"> 
                                        <a href="/attendance/bulk/" class="btn btn-primary w-100 h-100 py-3"> 
                                            <i class="fas fa-clipboard-check fa-2x mb-2"></i><br>Mark Attendance 
                                        </a> 
                                    </div> 
                                    <div class="col-sm-3"> 
                                        <a href="/students/" class="btn btn-success w-100 h-100 py-3"> 
                                            <i class="fas fa-users fa-2x mb-2"></i><br>Students 
                                        </a> 
                                    </div> 
                                    <div class="col-sm-3"> 
                                        <a href="/courses/" class="btn btn-info w-100 h-100 py-3"> 
                                            <i class="fas fa-book fa-2x mb-2"></i><br>Courses 
                                        </a> 
                                    </div> 
                                    <div class="col-sm-3"> 
                                        <a href="/admin/" class="btn btn-warning w-100 h-100 py-3"> 
                                            <i class="fas fa-cogs fa-2x mb-2"></i><br>Admin 
                                        </a> 
                                    </div> 
                                </div> 
                            </div> 
                        </div> 
                    </div> 
                </div> 
            </main> 
        </div> 
    </div> 
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script> 
    <script> 
        document.addEventListener('DOMContentLoaded', function() { 
            loadDashboardStats(); 
            initializeCharts(); 
        }); 
        function loadDashboardStats() { 
            fetch('/api/dashboard-stats/') 
                .then(response =
                .then(data =
                    if (data.success) { 
                        document.getElementById('total-students').textContent = data.stats.total_students; 
                        document.getElementById('present-today').textContent = data.stats.present_today; 
                        document.getElementById('total-courses').textContent = data.stats.total_courses; 
                        document.getElementById('attendance-rate').textContent = data.stats.attendance_rate + '%'; 
                    } 
                }) 
                .catch(error = loading stats:', error)); 
        } 
        function initializeCharts() { 
            const attendanceCtx = document.getElementById('attendanceChart').getContext('2d'); 
            new Chart(attendanceCtx, { 
                type: 'line', 
                data: { 
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'], 
                    datasets: [{ 
                        label: 'Attendance Rate', 
                        data: [85, 78, 92, 88, 76, 65, 70], 
                        borderColor: '#4e73df', 
                        backgroundColor: 'rgba(78, 115, 223, 0.1)', 
                        tension: 0.4, 
                        fill: true 
                    }] 
                }, 
                options: { 
                    responsive: true, 
                    plugins: { legend: { display: false } }, 
                    scales: { 
                        y: { 
                            beginAtZero: true, 
                            max: 100, 
                            ticks: { callback: function(value) { return value + '%'; } } 
                        } 
                    } 
                } 
            }); 
            const courseCtx = document.getElementById('courseChart').getContext('2d'); 
            new Chart(courseCtx, { 
                type: 'doughnut', 
                data: { 
                    labels: ['CS', 'Math', 'Physics', 'Chem', 'Bio'], 
                    datasets: [{ 
                        data: [30, 25, 20, 15, 10], 
                        backgroundColor: ['#4e73df', '#1cc88a', '#36b9cc', '#f6c23e', '#e74a3b'] 
                    }] 
                }, 
                options: { responsive: true, plugins: { legend: { display: false } } } 
            }); 
        } 
    </script> 
</body> 
</html> 
